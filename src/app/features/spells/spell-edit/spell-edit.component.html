<div class="center">
    <div>
    <h1>Save spell</h1>
    <form class="form" [formGroup]="editForm" (ngSubmit)="submit()">
        <mat-form-field class="full-width">
            <mat-label>Name:</mat-label>
            <input matInput type="text" formControlName="name">
            @if (isDirty) {
                @if (editForm.get('name')?.hasError('required')) {
                <div>
                    <a class="danger">*Field must not be empty!</a>
                </div>
                }
                @else if (editForm.get('name')?.hasError('minlength')) {
                    <div>
                        <a class="danger">*Name must have atleast 3 characters!</a>
                    </div>
                }
                @else if (editForm.get('name')?.hasError('maxlength')) {
                    <div>
                        <a class="danger">*Name must have maximum 50 characters!</a>
                    </div>
                }
            }
        </mat-form-field>
        <mat-form-field class="full-width">
            <mat-label>Level</mat-label>
        <mat-select formControlName="level">
            <mat-option value="0">Cantrip</mat-option>
            <mat-option value="1">Lvl 1</mat-option>
            <mat-option value="2">Lvl 2</mat-option>
            <mat-option value="3">Lvl 3</mat-option>
            <mat-option value="4">Lvl 4</mat-option>
            <mat-option value="5">Lvl 5</mat-option>
            <mat-option value="6">Lvl 6</mat-option>
            <mat-option value="7">Lvl 7</mat-option>
            <mat-option value="8">Lvl 8</mat-option>
            <mat-option value="9">Lvl 9</mat-option>
        </mat-select>
          </mat-form-field>
        <mat-form-field class="full-width">
            <mat-label>Casting time:</mat-label>
            <input matInput type="text" formControlName="castingTime">
            @if (isDirty) {
                @if (editForm.get('castingTime')?.hasError('required')) {
                <div>
                    <a class="danger">*Field must not be empty!</a>
                </div>
                }
                @else if (editForm.get('castingTime')?.hasError('minlength')) {
                    <div>
                        <a class="danger">*Casting time must have atleast 3 characters!</a>
                    </div>
                }
                @else if (editForm.get('castingTime')?.hasError('maxlength')) {
                    <div>
                        <a class="danger">*Casting time must have maximum 50 characters!</a>
                    </div>
                }
            }
        </mat-form-field>
        <mat-form-field class="three-fourths-width">
            <mat-label>Range</mat-label>
            <input matInput type="number" formControlName="castingRange">
            @if (isDirty) {
                @if (editForm.get('castingRange')?.hasError('required')) {
                <div>
                    <a class="danger">*Field must not be empty!</a>
                </div>
                }
                @else if (editForm.get('castingRange')?.hasError('min')) {
                    <div>
                        <a class="danger">*Range must not be negative number!</a>
                    </div>
                }
            }
        </mat-form-field><span class="large-text"> ft.</span>
        <mat-form-field class="full-width">
            <mat-label>Components:</mat-label>
            <input matInput type="text" formControlName="components">
            @if (isDirty) {
                @if (editForm.get('components')?.hasError('required')) {
                <div>
                    <a class="danger">*Field must not be empty!</a>
                </div>
                }
                @else if (editForm.get('components')?.hasError('minlength')) {
                    <div>
                        <a class="danger">*Components must have atleast 1 character!</a>
                    </div>
                }
                @else if (editForm.get('components')?.hasError('maxlength')) {
                    <div>
                        <a class="danger">*Components must have maximum 50 characters!</a>
                    </div>
                }
            }
        </mat-form-field>
        <mat-form-field class="full-width">
            <mat-label>Target:</mat-label>
            <input matInput type="text" formControlName="target">
            @if (isDirty) {
                @if (editForm.get('target')?.hasError('required')) {
                <div>
                    <a class="danger">*Field must not be empty!</a>
                </div>
                }
                @else if (editForm.get('target')?.hasError('minlength')) {
                    <div>
                        <a class="danger">*Target must have atleast 3 characters!</a>
                    </div>
                }
                @else if (editForm.get('target')?.hasError('maxlength')) {
                    <div>
                        <a class="danger">*Target must have maximum 50 characters!</a>
                    </div>
                }
            }
        </mat-form-field>
        <mat-form-field class="full-width">
        <mat-label>Duration type</mat-label>
        <mat-select formControlName="durationType">
            <mat-option value="instant">Instantenous</mat-option>
            <mat-option value="rounds">Rounds</mat-option>
            <mat-option value="minutes">Minutes</mat-option>
            <mat-option value="hours">Hours</mat-option>
            <mat-option value="days">Days</mat-option>
        </mat-select>
        </mat-form-field>
        @if (editForm.controls['durationType'].value!=='instant') {
            <mat-form-field class="full-width">
            <mat-label>Duration value:</mat-label>
                <input matInput type="number" formControlName="durationValue">
                @if (isDirty) {
                    @if (editForm.get('durationValue')?.hasError('required')) {
                    <div>
                        <a class="danger">*Field must not be empty!</a>
                    </div>
                    }
                    @else if (editForm.get('durationValue')?.hasError('min')) {
                        <div>
                            <a class="danger">*Duration must be atleast 1!</a>
                        </div>
                    }
                }
            </mat-form-field>
        }
        <mat-form-field class="full-width">
            <mat-label>Description:</mat-label>
            <textarea maxlength="65535" matInput type="text" formControlName="description"></textarea>
            @if (isDirty) {
                @if (editForm.get('description')?.hasError('required')) {
                <div>
                    <a class="danger">*Field must not be empty!</a>
                </div>
                }
                @else if (editForm.get('description')?.hasError('minlength')) {
                    <div>
                        <a class="danger">*Description must have atleast 3 characters!</a>
                    </div>
                }
                @else if (editForm.get('description')?.hasError('maxlength')) {
                    <div>
                        <a class="danger">*Description must have maximum 65535 characters!</a>
                    </div>
                }
            }
        </mat-form-field>
                <br>
            <button type="submit">Save</button>
    </form>
    </div>
    </div>
    
    